@page
@model ServerApp.Pages.App.Meal_Plans.IndexModel
@{
    ViewData["StartDate"] = Model.StartDateView;
}

@section Head {
<style>
    .meal-edit {
        min-width: 22em;
    }
    .meal-edit h2, .meal-edit p {
        height: 1.25em;
        overflow: hidden;
    }
    main { width: 100%; }
    @@media (max-width: 481px) {
        .meal-edit h2, .meal-edit p {
            height: auto; overflow: none;
        }
        .meal-edit {
            min-width: auto;
        }
    }
</style>
}

<form method=get>
    <label asp-for="StartDate">Start Date:&nbsp;</label>
    <input
           type=date
           asp-for="StartDate"
           required
           hx-get="/app/meal-plans/edit"
           hx-select="#meal-selections"
           hx-push-url="true"
           hx-target="#meal-selections">
    <br><input type=submit value=Submit hf-hidden>
</form>

<section id=meal-selections class=cards>
    @foreach (var mealPlan in @Model.MealPlans)
    {
        if (mealPlan?.Recipes?.FirstOrDefault() is { })
        {
            <partial name="_RecipeTemplate" model="mealPlan" />
        }
        else
        {
            <partial name="_CancelledTemplate" model="mealPlan" />
        }
    }
    <div><a href="/app/recipes/add">Add New Meal</a></div>
</section>

